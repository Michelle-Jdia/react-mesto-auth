{"version":3,"sources":["images/Vector.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Footer.js","utils/api.js","components/ProtectedRoute.js","components/Register.js","components/Login.js","images/success.svg","images/fail.svg","components/InfoTooltip.js","utils/mestoAuth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","location","useLocation","path","pathname","title","className","src","logo","alt","loggedIn","email","to","style","color","onClick","onSignOut","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","item","cardLikeButtonClassName","link","name","type","length","Main","onEditAvatar","onAddPlace","onEditProfile","cards","avatar","about","map","PopupWithForm","isOpen","onClose","onSubmit","handleSubmit","children","buttonText","ImagePopup","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","evt","preventDefault","id","value","placeholder","required","minLength","maxLength","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarInput","useRef","current","ref","AddPlacePopup","setLink","_","Footer","Date","getFullYear","api","address","headers","this","_address","_headers","fetch","then","_checkResponse","method","body","JSON","stringify","url","console","log","cardId","dislikeCard","likeCard","res","ok","json","Promise","reject","status","authorization","ProtectedRoute","Component","component","withRouter","setEmail","password","setPassword","e","onRegister","onLogin","InfoTooltip","success","fail","BASE_URL","checkRes","history","useHistory","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","isImagePopupOpen","setImagePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setStatus","setLoggedIn","tokenCheck","localStorage","getItem","jwt","token","data","push","catch","err","closeAllPopups","getInitialCards","cardList","getUserInfo","Provider","removeItem","exact","i","changeLikeCardStatus","newCard","currentCard","removeCard","newCards","filter","elem","Login","auth","setItem","Register","editUserInfo","addCard","editUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","App","document","getElementById"],"mappings":"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","file":"static/js/main.d0969016.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Vector.bbe2a6ea.svg\";","import React from \"react\";\r\nimport logo from \"../images/Vector.svg\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nexport default Header;\r\nfunction Header(props) {\r\n  const location = useLocation();\r\n  const path = location.pathname === \"/sign-in\" ? \"/sign-up\" : \"/sign-in\";\r\n  const title = location.pathname === \"/sign-in\" ? \"Регистрация\" : \"Вход\";\r\n  return (\r\n    <header className=\"header page__header\">\r\n      <img src={logo} alt=\"Логотип сайта\" className=\"header__logo\" />\r\n        {props.loggedIn ? (\r\n          <>\r\n            <span className=\"header__email\">{props.email}</span>\r\n            <Link\r\n              className=\"header__link-reg\"\r\n              to=\"/\"\r\n              style={{ color: \"#A9A9A9\" }}\r\n              onClick={props.onSignOut}>\r\n              Выйти\r\n            </Link>\r\n          </>\r\n        ) : (\r\n          <Link className=\"header__link-reg\" to={path}>\r\n            {title}\r\n          </Link>\r\n        )}\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nexport default Card;\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n\r\n  const cardDeleteButtonClassName = `cards__bin ${\r\n    isOwn ? \"cards__bin-delete\" : \"cards__bin_hide\"\r\n  }`;\r\n\r\n  const isLiked = card.likes.some((item) => item._id === currentUser._id);\r\n  const cardLikeButtonClassName = `cards__heart ${\r\n    isLiked ? \"cards__heart_active\" : \"\"\r\n  }`;\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    onCardDelete(card);\r\n  }\r\n  return (\r\n    <div className=\"template\">\r\n      <article className=\"cards\">\r\n        <img\r\n          src={card.link}\r\n          alt={card.name}\r\n          className=\"cards__image\"\r\n          onClick={handleClick}\r\n        />\r\n        <div className=\"cards__info\">\r\n          <h2 className=\"cards__title\">{card.name}</h2>\r\n          <div className=\"cards__likes-container\">\r\n            <button\r\n              className={cardLikeButtonClassName}\r\n              type=\"button\"\r\n              onClick={handleLikeClick}></button>\r\n            <span className=\"cards__likes\">{card.likes.length}</span>\r\n          </div>\r\n          <button\r\n            className={cardDeleteButtonClassName}\r\n            type=\"button\"\r\n            onClick={handleCardDelete}></button>\r\n        </div>\r\n      </article>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport \"../index.css\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nexport default Main;\r\nfunction Main(props) {\r\n  const { onEditAvatar, onAddPlace, onEditProfile, onCardClick, onCardLike, onCardDelete, cards } = props;\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile content__section\">\r\n        <div className=\"profile__avatar-container\">\r\n          <img\r\n            src={`${currentUser.avatar}`}\r\n            alt=\"Фото Аватара\"\r\n            className=\"profile__avatar\"\r\n          />\r\n          <div className=\"profile__hover-edit\" onClick={onEditAvatar}></div>\r\n        </div>\r\n        <div className=\"profile__container-info\">\r\n          <div className=\"profile__avatar-info\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button\r\n              className=\"profile__button-edit\"\r\n              type=\"button\"\r\n              onClick={onEditProfile}></button>\r\n          </div>\r\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n        </div>\r\n        <button\r\n          className=\"profile__button-add\"\r\n          type=\"button\"\r\n          onClick={onAddPlace}></button>\r\n      </section>\r\n      <section className=\"pictures\">\r\n        {cards.map((card) => (\r\n          <Card\r\n            key={card._id}\r\n            card={card}\r\n            onCardClick={onCardClick}\r\n            onCardLike={onCardLike}\r\n            onCardDelete={onCardDelete}\r\n          />\r\n        ))}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\nexport default PopupWithForm;\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_${props.name} ${\r\n        props.isOpen && \"popup__opened\"\r\n      }`}>\r\n      <div className=\"popup__container\">\r\n        <button\r\n          className=\"popup__close\"\r\n          type=\"button\"\r\n          onClick={props.onClose}></button>\r\n\r\n        <form\r\n          className={`popup__form form_type_${props.name}`}\r\n          name={props.name}\r\n          onSubmit={props.handleSubmit}>\r\n          <h2 className=\"popup__title\">{props.title}</h2>\r\n          {props.children}\r\n          <button className=\"popup__button\" type=\"submit\">\r\n            {props.buttonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nexport default ImagePopup;\r\nfunction ImagePopup(props) {\r\n  return (\r\n    <div className={`popup popup-img ${props.card && props.isOpen ? \"popup__opened\" : \"popup__hide\"}`}>\r\n      <div className=\"popup-img__container\">\r\n        <button\r\n          className=\"popup-img__close\"\r\n          type=\"button\"\r\n          onClick={props.onClose}></button>\r\n        <img\r\n          src={props.card?.link}\r\n          alt={ props.card?.name}\r\n          className=\"popup-img__image\"\r\n        />\r\n        <p className=\"popup-img__subtitle\">{props.card ? props.card.name : ''}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nexport default EditProfilePopup;\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const [name, setName] = React.useState(\"\");\r\n  const [description, setDescription] = React.useState(\"\");\r\n\r\n  function handleChangeName(evt) {\r\n    setName(evt.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(evt) {\r\n    setDescription(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser({\r\n      name: name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Редактировать профиль\"\r\n      name=\"profile\"\r\n      buttonText=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}>\r\n      <input\r\n        id=\"input-profile-name\"\r\n        type=\"text\"\r\n        className=\"popup__input popup__input-text\"\r\n        name=\"name\"\r\n        value={name || \"\"}\r\n        placeholder=\"Имя\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        onChange={handleChangeName}\r\n      />\r\n      <span className=\"popup__input-error\"></span>\r\n      <input\r\n        id=\"nput-about\"\r\n        type=\"text\"\r\n        className=\"popup__input-text popup__input-text_type_job\"\r\n        name=\"about\"\r\n        value={description || \"\"}\r\n        placeholder=\"О себе\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        onChange={handleChangeDescription}\r\n      />\r\n      <span className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nexport default EditAvatarPopup;\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const avatarInput = React.useRef();\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: avatarInput.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Обновить аватар\"\r\n      name=\"avatar\"\r\n      buttonText=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}>\r\n      <input\r\n        type=\"url\"\r\n        className=\"popup-avatar__input-text popup-avatar__input-link\"\r\n        id=\"avatar-input-link\"\r\n        name=\"link\"\r\n        placeholder=\"Ссылка на аватар\"\r\n        ref={avatarInput}\r\n        required\r\n      />\r\n      <span className=\"form-avatar-input-error\"> </span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nexport default AddPlacePopup;\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n  React.useEffect(_ => {\r\n    setName('');\r\n    setLink('');\r\n  }, [isOpen]);\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onAddPlace({\r\n      name: name,\r\n      link: link,\r\n    });\r\n  }\r\n\r\n  function handleChangeName(evt) {\r\n    setName(evt.target.value);\r\n  }\r\n\r\n  function handleChangeLink(evt) {\r\n    setLink(evt.target.value);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Новое место\"\r\n      name=\"photo\"\r\n      buttonText=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}>\r\n      <input\r\n        type=\"text\"\r\n        className=\"popup-creat__input-text popup-creat__input-name\"\r\n        id=\"input-name\"\r\n        name=\"name\"\r\n        placeholder=\"Название\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        onChange={handleChangeName}\r\n        value={name}\r\n      />\r\n      <span className=\"popup__input-error\"></span>\r\n      {/* <label className=\"popup-creat__label\" for=\"input-link\"></label> */}\r\n      <input\r\n        type=\"url\"\r\n        className=\"popup-creat__input-text popup-creat__input-link\"\r\n        id=\"input-link\"\r\n        name=\"link\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        onChange={handleChangeLink}\r\n        value={link}\r\n        required\r\n      />\r\n      <span className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nexport default Footer;\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer page__footer\">\r\n      <p className=\"footer__copyright\">{`© 2020 - ${new Date().getFullYear()} Mesto Russia`}</p>\r\n    </footer>\r\n  );\r\n}","class Api {\r\n  constructor({ address, headers }) {\r\n    this._address = address;\r\n    this._headers = headers;\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._address}/cards`, {\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._address}/users/me`, {\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  editUserInfo(name, about) {\r\n    return fetch(`${this._address}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  addCard(name, link) {\r\n    return fetch(`${this._address}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  editUserAvatar(url) {\r\n    console.log(url);\r\n    return fetch(`${this._address}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: url,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  likeCard(cardId) {\r\n    return fetch(`${this._address}/cards/likes/${cardId}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  dislikeCard(cardId) {\r\n    return fetch(`${this._address}/cards/likes/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  removeCard(cardId) {\r\n    return fetch(`${this._address}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    if (isLiked) {\r\n      return this.dislikeCard(cardId);\r\n    } else {\r\n      return this.likeCard(cardId);\r\n    }\r\n  }\r\n  _checkResponse(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Ошибка ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  address: \"https://mesto.nomoreparties.co/v1/cohort-22\",\r\n  headers: {\r\n    authorization: \"c978f897-d705-4f1d-8b98-36c9feaeed93\",\r\n    \"Content-type\": \"application/json\",\r\n  },\r\n});\r\nexport default api;\r\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => (\n  <Route>\n    {() =>\n      props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n    }\n  </Route>\n);\nexport default ProtectedRoute;","import React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nexport default withRouter(Register);\nfunction Register(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onRegister(email, password);\n    setEmail(\"\");\n    setPassword(\"\");\n  }\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n  }\n\n  return (\n    <div className=\"login-page\">\n      <form className=\"login-page__form\" onSubmit={handleSubmit}>\n        <h2 className=\"login-page__title\">Регистрация</h2>\n        <input\n          className=\"login-page__inputs\"\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email\"\n          required\n          onChange={handleEmailChange}\n          value={email}></input>\n        <input\n          className=\"login-page__inputs\"\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Пароль\"\n          required\n          minLength=\"6\"\n          onChange={handlePasswordChange}\n          value={password}></input>\n        <button className=\"login-page__button\" type=\"submit\">\n          Зарегистрироваться\n        </button>\n      </form>\n      <Link className=\"login-page__link\" to=\"/sign-in\">\n        Уже зарегистрированы? Войти\n      </Link>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nexport default withRouter(Login);\nfunction Login(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onLogin(email, password);\n  }\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n  }\n\n  return (\n    <div className=\"login-page\">\n      <form className=\"login-page__form\" onSubmit={handleSubmit}>\n        <h2 className=\"login-page__title\">Вход</h2>\n        <input\n          className=\"login-page__inputs\"\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email\"\n          required\n          onChange={handleEmailChange}\n          value={email}></input>\n        <input\n          className=\"login-page__inputs\"\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Пароль\"\n          required\n          minLength=\"6\"\n          onChange={handlePasswordChange}\n          value={password}></input>\n        <button className=\"login-page__button\" type=\"submit\">\n          Войти\n        </button>\n      </form>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import React from \"react\";\nimport success from \"../images/success.svg\";\nimport fail from \"../images/fail.svg\";\nexport default InfoTooltip;\nfunction InfoTooltip(props) {\n  return (\n    <div\n      className={`popup ${props.isOpen ? \"popup__opened\" : \"\"}`}>\n      <div className=\"popup__condition-container\">\n        <img\n          className=\"popup__condition-image\"\n          src={props.status ? success : fail}\n          alt={props.status ? \"Успешно\" : \"Ошибка\"}\n        />\n        <p className=\"popup__condition-text\">\n          {props.status\n            ? \"Вы успешно зарегистрировались!\"\n            : \"Что-то пошло не так! Попробуйте ещё раз.\"}\n        </p>\n        <button\n          className=\"popup__close\"\n          type=\"reset\"\n          onClick={props.onClose}></button>\n      </div>\n    </div>\n  );\n}\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nfunction checkRes(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка ${res.status}`);\n}\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({email, password})\n  }).then(checkRes);\n}\n\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({email, password})\n  }).then(checkRes);\n}\n\nexport const checkToken = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\" : `Bearer ${token}`\n    }\n  }).then(checkRes);\n}","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport Footer from \"./Footer\";\r\nimport api from \"../utils/api\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport Register from \"./Register\";\r\nimport Login from \"./Login\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport * as auth from \"../utils/mestoAuth\";\r\nimport { Route, Switch, useHistory, withRouter } from \"react-router-dom\";\r\nexport default withRouter(App);\r\nfunction App() {\r\n  const history = useHistory();\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\r\n    React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\r\n    React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\r\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\r\n  const [status, setStatus] = React.useState(false);\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [email, setEmail] = React.useState(\"\");\r\n\r\n  React.useEffect(() => {\r\n    api\r\n      .getInitialCards()\r\n      .then((cardList) => {\r\n        setCards(cardList);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n  function tokenCheck() {\r\n    if (localStorage.getItem(\"jwt\")) {\r\n      const jwt = localStorage.getItem(\"jwt\");\r\n      if (jwt) {\r\n        auth\r\n          .checkToken(jwt)\r\n          .then((res) => {\r\n            if (res) {\r\n              setEmail(res.data.email);\r\n              setLoggedIn(true);\r\n              history.push(\"/\");\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    }\r\n  }\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n\r\n    api\r\n      .changeLikeCardStatus(card._id, isLiked)\r\n      .then((newCard) => {\r\n        setCards((cards) =>\r\n          cards.map((currentCard) =>\r\n            currentCard._id === card._id ? newCard : currentCard\r\n          )\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api\r\n      .removeCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((elem) => elem !== card);\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    api\r\n      .getUserInfo()\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard(null);\r\n    setIsInfoTooltipOpen(false);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    setImagePopupOpen(true);\r\n  }\r\n\r\n  function handleUpdateUser({ name, about }) {\r\n    api\r\n      .editUserInfo(name, about)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar({ avatar }) {\r\n    api\r\n      .editUserAvatar(avatar)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  function handleAddPlaceSubmit({ name, link }) {\r\n    api\r\n      .addCard(name, link)\r\n      .then((data) => {\r\n        setCards([data, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  function handleRegister(email, password) {\r\n    auth\r\n      .register(email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          setIsInfoTooltipOpen(true);\r\n          setStatus(true);\r\n          history.push(\"/sign-in\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setIsInfoTooltipOpen(true);\r\n        setStatus(false);\r\n      });\r\n  }\r\n  function handleLogin(email, password) {\r\n    auth\r\n      .login(email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          localStorage.setItem(\"jwt\", res.token);\r\n          tokenCheck();\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setIsInfoTooltipOpen(true);\r\n        setStatus(false);\r\n      });\r\n  }\r\n\r\n  function handleSignOut() {\r\n    localStorage.removeItem(\"jwt\");\r\n    setLoggedIn(false);\r\n  }\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header loggedIn={loggedIn} email={email} onSignOut={handleSignOut} />\r\n        {/* main */}\r\n        <Switch>\r\n          <ProtectedRoute\r\n            exact\r\n            path=\"/\"\r\n            component={Main}\r\n            loggedIn={loggedIn}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n          />\r\n          <Route path=\"/sign-in\">\r\n            <Login onLogin={handleLogin} />\r\n          </Route>\r\n          <Route path=\"/sign-up\">\r\n            <Register onRegister={handleRegister} />\r\n          </Route>\r\n        </Switch>\r\n        {/* end main */}\r\n\r\n        {/* footer */}\r\n        <Footer />\r\n        {/* end footer */}\r\n\r\n        {/* popup profile */}\r\n\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n\r\n        {/* end popup profile */}\r\n\r\n        {/* start popup creat card */}\r\n\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n\r\n        {/* end popup creat card */}\r\n\r\n        {/* start popup edite avatar */}\r\n\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n\r\n        {/* end popup edite avatar */}\r\n\r\n        {/* start popup ask */}\r\n        <PopupWithForm\r\n          title=\"Вы уверены?\"\r\n          name=\"remove-card\"\r\n          buttonText=\"Да\"\r\n          onClose={closeAllPopups}></PopupWithForm>\r\n        {/* end popup ask */}\r\n\r\n        {/* start popup img */}\r\n\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopups}\r\n          isOpen={isImagePopupOpen}\r\n        />\r\n\r\n        {/* end popup img */}\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipOpen}\r\n          onClose={closeAllPopups}\r\n          status={status}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nReactDOM.render(\n  <React.StrictMode basename=\"/react-mesto-auth\">\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}